CREATE TABLE CUSTOMER(
    CUSTOMER_ID INTEGER PRIMARY KEY,
    CUSTOMER_NAME VARCHAR(255),
    CUSTOMER_CITY VARCHAR(128),
    CUSTOMER_REGION VARCHAR(128),
    CUSTOMER_STATE VARCHAR(5)
);

CREATE TABLE PRODUCT(
    PRODUCT_ID INTEGER PRIMARY KEY,
    PRODUCT_NAME VARCHAR(128),
    PRODUCT_CATEGORY VARCHAR(128),
    PRODUCT_PRICE DECIMAL(13,2)
);


CREATE TABLE ORDER_LINES (
    ORDER_LINE_ID VARCHAR(32) NOT NULL,
    ORDER_ID VARCHAR(32) NOT NULL,
    PRODUCT_ID INTEGER NOT NULL,
    CUSTOMER_ID INTEGER NOT NULL,
    ORDER_STATUS VARCHAR(32),
    ORDER_DATE DATE,
    ORDER_QUANTITY INTEGER,
    CONSTRAINT ORDER_LINES_PK PRIMARY KEY (ORDER_LINE_ID),
    CONSTRAINT ORDER_LINES_FK FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
    CONSTRAINT ORDER_LINES_FK_1 FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID)
);

COPY CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, CUSTOMER_CITY, CUSTOMER_REGION, CUSTOMER_STATE)
    FROM '/Users/zsvoboda/repos/gooddata-jdbc/data/csv/CUSTOMER.csv'
    DELIMITER ','
    CSV HEADER;

COPY PRODUCT(PRODUCT_ID, PRODUCT_NAME, PRODUCT_CATEGORY, PRODUCT_PRICE)
    FROM '/Users/zsvoboda/repos/gooddata-jdbc/data/csv/PRODUCT.csv'
    DELIMITER ','
    CSV HEADER;

COPY ORDER_LINES(ORDER_LINE_ID, ORDER_ID, PRODUCT_ID, CUSTOMER_ID, ORDER_STATUS, ORDER_DATE, ORDER_QUANTITY)
    FROM '/Users/zsvoboda/repos/gooddata-jdbc/data/csv/ORDER_LINES.csv'
    DELIMITER ','
    CSV HEADER;